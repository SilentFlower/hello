# 验收标准规则

本模块定义 HelloAGENTS 的验收分级、阶段验收标准和流程级验收规则。

---

## 规则概述

```yaml
规则名称: 验收标准规则
规则编号: G8
适用范围: 所有阶段和流程的质量验收
核心职责:
  - 定义验收分级和维度
  - 定义各阶段的验收标准
  - 定义阶段间闸门条件
  - 定义自动模式下的验收强制性
  - 定义流程级验收规则
```

---

<validation_rules>
## 核心规则

### 验收分级

```yaml
阻断性(⛔): 失败必须停止，自动模式打破静默
警告性(⚠️): 记录但可继续
信息性(ℹ️): 仅记录供参考

验收维度:
  - 完整性: 文件存在且非空
  - 正确性: 格式规范
  - 一致性: 内容匹配
  - 安全性: 无敏感信息泄露
```

### 阶段验收标准

```yaml
evaluate:
  标准: 需求评分≥7分
  级别: 阻断性
  说明: 评分不足时必须追问补充

analyze:
  标准: 项目上下文已获取
  级别: 信息性
  说明: 上下文获取失败时记录但可继续

design:
  标准: 方案包结构完整+格式正确
  级别: 阻断性
  说明: 使用 validate_package.py 验证

develop:
  标准: 阻断性测试通过+代码安全检查
  级别: 阻断性
  说明: 测试失败或安全问题必须修复

tweak:
  标准: 变更已应用
  级别: 警告性
  说明: 应用失败时记录但可手动处理
```

### 阶段间闸门

```yaml
evaluate → analyze:
  条件: 需求评分≥7
  失败处理: 继续追问直到达标

analyze → design:
  条件: 项目上下文已获取
  失败处理: 记录警告，允许继续

design → develop:
  条件: 方案包存在 + validate_package.py 验证通过
  失败处理: 必须修复方案包后才能继续
```

### 自动模式验收强制性

```yaml
不可跳过（必须打破静默）:
  - 需求评分验收
  - 方案包结构验收
  - 阻断性测试验收
  - 代码安全验收

可弱化（只记录）:
  - 警告性测试
  - 代码质量分析
```

### 流程级验收

```yaml
适用命令: ~auto, ~plan, ~exec
执行时机: 流程结束前（状态重置前）

验收内容:
  - 交付物状态: 方案包/代码变更/知识库
  - 需求符合性: 已完成/未完成项
  - 问题汇总: 错误/警告/信息

输出格式:
  按G3场景内容规则（完成场景）输出:
  - 验收状态: 通过/部分通过/失败
  - 详情摘要: 各维度验收结果
```
</validation_rules>

---

## 异常处理

```yaml
验收脚本不可用:
  - 降级为内置逻辑验收
  - 输出警告，说明降级原因
  - 建议安装完整的脚本环境

验收结果冲突:
  - 多个验收器结果不一致时
  - 按最严格的结果处理
  - 输出所有验收器的详细结果
```

---

## 规则引用关系

```yaml
被引用:
  - 所有阶段模块（阶段验收）
  - ~auto, ~plan, ~exec（流程级验收）
  - references/rules/state.md（阶段流转闸门）

引用:
  - G3 输出格式（验收结果输出）
  - references/rules/tools.md（验收脚本调用）
```
