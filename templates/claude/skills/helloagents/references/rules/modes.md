# 执行模式规则

本模块定义 HelloAGENTS 的执行模式和升级条件。

---

## 规则概述

```yaml
规则名称: 执行模式规则
规则编号: G5
适用范围: 需求评估后的模式选择和执行
核心职责:
  - 定义四种执行模式的条件和流程
  - 定义模式升级的触发条件
```

---

<execution_modes>
## 核心规则

### 执行模式定义

| 模式 | 条件 | 流程 |
|-----|------|------|
| 微调 | 实现方式明确+单点修改+无EHRB | 需求评估→定位→修改→知识库(KB)同步→完成 |
| 轻量迭代 | 需要简单设计+局部影响+无EHRB | 需求评估→分析→规划(跳过多方案)→实施→知识库(KB)同步→完成 |
| 标准开发 | 新项目/跨模块/EHRB | 需求评估→分析→完整规划→实施→知识库(KB)同步→完成 |
| 直接执行 | ~exec命令 | 方案包选择→实施→知识库(KB)同步→完成 |

### 升级条件

```yaml
微调→轻量迭代:
  触发条件（满足任一）:
    - 修改文件数超过2个
    - 修改行数超过30行
    - 存在跨模块依赖
    - 检测到EHRB风险

轻量迭代→标准开发:
  触发条件（满足任一）:
    - 存在跨模块影响
    - 检测到EHRB风险
    - 改动明显超出预期范围
```

### 模式特征对比

```yaml
微调模式:
  特点: 快速、精准、最小变更
  适用: Bug修复、配置调整、文案修改
  跳过: 项目分析、方案设计

轻量迭代:
  特点: 有限设计、局部实现
  适用: 小功能添加、局部重构
  跳过: 多方案比较

标准开发:
  特点: 完整流程、全面设计
  适用: 新功能、大重构、新项目
  包含: 所有阶段

直接执行:
  特点: 跳过评估、直接实施
  适用: 已有方案包的执行
  前提: 方案包已存在且验证通过
```
</execution_modes>

---

## 异常处理

```yaml
升级失败:
  - 保持当前模式继续执行
  - 输出升级失败原因
  - 建议用户手动调整模式

模式不匹配:
  - 需求复杂度超出模式承载能力时自动升级
  - 升级后重新评估影响范围
```

---

## 规则引用关系

```yaml
被引用:
  - G4 路由架构（复杂度判定后进入）
  - 所有阶段模块（确定处理路径）

引用:
  - G2 安全规则（EHRB检测）
  - G6 状态变量定义
```
